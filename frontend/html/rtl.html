<!--
=========================================================
* * Black Dashboard - v1.0.1
=========================================================

* Product Page: https://www.creative-tim.com/product/black-dashboard
* Copyright 2019 Creative Tim (https://www.creative-tim.com)


* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Salida</title>
<!-- CSS Black Dashboard -->
<link href="../assets/css/black-dashboard.css?v=1.0.0" rel="stylesheet" />
<style>
.form-container {
padding: 20px;
max-width: 600px;
margin: auto;
}

.result {
margin-top: 20px;
background-color: #1e1e2f;
padding: 15px;
border-radius: 8px;
color: white;
}
</style>
</head>

<body>
<div class="wrapper">
<!-- Menú lateral -->
<div class="sidebar" data-color="pink">
<div class="sidebar-wrapper">
<div class="logo">
<a href="#" class="simple-text logo-normal">CREATIVE TIM</a>
</div>
<ul class="nav">
<li>
<a href="dashboard.html">
<i class="tim-icons icon-chart-pie-36"></i>
<p>Registro de Entrada</p>
</a>
</li>
<li>
<a href="mapa.html">
<i class="tim-icons icon-map-big"></i>
<p>Mapa</p>
</a>
</li>
<li class="active">
<a href="salida.html">
<i class="tim-icons icon-notes"></i>
<p>Registro de Salida</p>
</a>
</li>
</ul>
</div>
</div>

<!-- Contenido principal -->
<div class="main-panel">
<div class="content">
<div class="form-container">
<h3 class="text-white">Registro de Salida</h3>

<div class="form-group">
<label class="text-white">Documento del Cliente</label>
<input type="text" id="documento" class="form-control" placeholder="Ingrese número de documento">
</div>

<div class="form-group">
<label class="text-white">Hora de Entrada</label>
<input type="time" id="horaEntrada" class="form-control">
</div>

<button class="btn btn-primary btn-block" onclick="registrarSalida()">Registrar Salida</button>

<div class="result" id="resultado" style="display:none;">
<p><strong>Hora de Salida:</strong> <span id="horaSalida"></span></p>
<p><strong>Tiempo Total:</strong> <span id="tiempoTotal"></span></p>
<p><strong>Valor a Pagar:</strong> $<span id="valorPagar"></span></p>
</div>
</div>
</div>
</div>
</div>

<script>
function registrarSalida() {
const doc = document.getElementById('documento').value.trim();
const horaEntrada = document.getElementById('horaEntrada').value;

if (!doc || !horaEntrada) {
alert("Por favor complete todos los campos");
return;
}

const ahora = new Date();
const horaSalidaStr = ahora.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit' });

const [hEntrada, mEntrada] = horaEntrada.split(":").map(Number);
const entradaDate = new Date();
entradaDate.setHours(hEntrada, mEntrada, 0);

const diffMs = ahora - entradaDate;
const diffMin = Math.floor(diffMs / 60000);
const diffHoras = (diffMin / 60).toFixed(2);

const tarifaHora = 1000; // Cambia el valor si es necesario
const valor = Math.ceil(diffMin / 60) * tarifaHora;

document.getElementById('horaSalida').textContent = horaSalidaStr;
document.getElementById('tiempoTotal').textContent = `${diffMin} min (${diffHoras} h)`;
document.getElementById('valorPagar').textContent = valor;

document.getElementById('resultado').style.display = "block";
}
</script>
</body>

  </script>
</body>

</html>